<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Voice to Text Demo</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
      }
      header {
        text-align: center;
        padding: 10px;
        background-color: #fff;
      }
      .logo-container {
        animation: zoomInOut 3s ease-in-out infinite;
        display: inline-block;
      }
      @keyframes zoomInOut {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }
      header img {
        max-width: 150px;
      }
      .slider {
        width: 100%;
        padding: 0 5px;
        box-sizing: border-box;
        overflow: hidden;
        background: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .slider-container {
        width: 100%;
        aspect-ratio: 16 / 9;
        position: relative;
      }
      .slider-container img {
        width: 100%;
        height: 80%;
        object-fit: contain;
        position: absolute;
        opacity: 0;
        transition: opacity 1s ease-in-out;
      }
      .slider-container img.active {
        opacity: 1;
      }
      .about {
        padding: 60px 20px;
        background: linear-gradient(135deg, #ffffff, #f0f0f0);
        text-align: center;
        position: relative;
      }
      .about::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(to right, #4caf50, #81c784);
      }
      .about h2 {
        font-size: 36px;
        color: #333;
        margin-bottom: 20px;
      }
      .about p {
        font-size: 20px;
        color: #555;
        max-width: 800px;
        margin: 0 auto;
        line-height: 1.6;
      }
      .voice-box {
        padding: 60px 20px;
        background: #fafafa;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .voice-container {
        width: 100%;
        max-width: 900px;
        background: #ffffff;
        padding: 40px 30px;
        border-radius: 16px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        text-align: center;
        border: 1px solid #e0e0e0;
        transition: transform 0.3s ease;
      }
      .voice-container:hover {
        transform: translateY(-4px);
      }
      .voice-container h2 {
        font-size: 32px;
        margin-bottom: 20px;
        color: #2c3e50;
      }
      .controls {
        margin-bottom: 20px;
      }
      .controls label {
        margin-right: 10px;
        font-size: 16px;
        color: #555;
      }
      select {
        padding: 8px 16px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 16px;
        outline: none;
        background-color: #f9f9f9;
        transition: border-color 0.3s ease;
      }
      select:focus {
        border-color: #4caf50;
      }
      .btn-group {
        margin-top: 20px;
        margin-bottom: 20px;
      }
      button {
        padding: 14px 30px;
        font-size: 16px;
        font-weight: 600;
        margin: 8px;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        color: white;
        background: linear-gradient(135deg, #42e695, #3bb2b8);
        box-shadow: 0 4px 15px rgba(66, 230, 149, 0.3);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }
      button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -75%;
        width: 50%;
        height: 100%;
        background: rgba(255, 255, 255, 0.2);
        transform: skewX(-20deg);
        transition: 0.6s ease-in-out;
      }
      button:hover::before {
        left: 130%;
      }
      button:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 25px rgba(59, 178, 184, 0.4);
        background: linear-gradient(135deg, #3bb2b8, #42e695);
      }
      textarea {
        width: 100%;
        height: 200px;
        padding: 15px;
        font-size: 16px;
        border: 1px solid #ddd;
        border-radius: 12px;
        resize: vertical;
        margin-bottom: 20px;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      canvas {
        display: block;
        margin: 0 auto;
        border-radius: 8px;
        background: #222;
      }
      @media (max-width: 768px) {
        .slider-container {
          aspect-ratio: 4 / 3;
        }
        .about h2 {
          font-size: 28px;
        }
        .about p {
          font-size: 18px;
        }
      }
      @media (max-width: 480px) {
        header img {
          max-width: 100px;
        }
        .voice-container {
          padding: 30px 15px;
        }
      }
      .more-info {
        text-align: center;
        margin: 20px;
      }
    </style>
  </head>
  <body>
    <div class="slider">
      <div class="slider-container">
        <img src="/public/Image.jpg" alt="Slide 1" class="active" />
        <img src="/public/Image2.jpg" alt="Slide 2" />
      </div>
    </div>
    <header>
      <div class="logo-container">
        <img src="logo.jpg" alt="Logo" />
      </div>
    </header>

    <section class="about">
      <h2>Focus on clients while TalknType does the paperwork</h2>
      <p>
        Fast, fluent, flexible Dragon Legal speech recognition enables you to
        accurately capture and format specialized legal documentation by
        voice‚Äîat your desk or on the go. Robust legal transcription capabilities
        and powerful customizations can be easily shared and deployed across a
        practice or legal department.
      </p>
    </section>

    <section class="voice-box">
      <div class="voice-container">
        <h2>üé§ Start Typing by Voice</h2>
        <div class="controls">
          <label for="languageSelect">Choose Language:</label>
          <select id="languageSelect">
            <option value="en-IN">English (India)</option>
            <option value="hi-IN">Hindi</option>
            <option value="mr-IN">Marathi</option>
          </select>
        </div>
        <div class="btn-group">
          <button id="talkBtn">üéôÔ∏è Start Talking</button>
          <button id="printBtn">üñ®Ô∏è Print</button>
        </div>
        <textarea
          id="output"
          placeholder="Your speech will appear here..."
        ></textarea>
        <canvas id="visualizer" width="300" height="100"></canvas>
      </div>
    </section>

    <div class="more-info">
      <button onclick="alert('More information coming soon...')">
        More Info
      </button>
    </div>

    <script>
      const talkBtn = document.getElementById("talkBtn");
      const printBtn = document.getElementById("printBtn");
      const output = document.getElementById("output");
      const languageSelect = document.getElementById("languageSelect");
      const canvas = document.getElementById("visualizer");
      const ctx = canvas.getContext("2d");

      let recognition;
      let audioCtx, analyser, source;
      let running = false;
      let transcriptSoFar = "";

      function startSpeechRecognition() {
        if (!("webkitSpeechRecognition" in window)) {
          alert("Speech Recognition not supported. Use Chrome.");
          return;
        }

        recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.lang = languageSelect.value;

        recognition.onresult = (event) => {
          let interim = "";

          for (let i = event.resultIndex; i < event.results.length; ++i) {
            const transcript = event.results[i][0].transcript;
            if (event.results[i].isFinal) {
              transcriptSoFar += transcript + " ";
            } else {
              interim += transcript;
            }
          }

          output.value = transcriptSoFar + interim;
        };

        recognition.onerror = (event) => {
          console.error("Recognition error:", event.error);
        };

        recognition.start();
      }

      function startAudioVisualization() {
        navigator.mediaDevices
          .getUserMedia({ audio: true })
          .then((stream) => {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioCtx.createAnalyser();
            source = audioCtx.createMediaStreamSource(stream);
            source.connect(analyser);

            analyser.fftSize = 64;
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);

            function draw() {
              requestAnimationFrame(draw);
              analyser.getByteFrequencyData(dataArray);

              ctx.clearRect(0, 0, canvas.width, canvas.height);
              ctx.fillStyle = "lime";
              const barWidth = canvas.width / bufferLength;
              for (let i = 0; i < bufferLength; i++) {
                const barHeight = dataArray[i];
                ctx.fillRect(
                  i * barWidth,
                  canvas.height - barHeight,
                  barWidth - 1,
                  barHeight
                );
              }
            }

            draw();
          })
          .catch((err) => console.error("Microphone access denied:", err));
      }

      talkBtn.addEventListener("click", () => {
        if (!running) {
          transcriptSoFar = output.value;
          startSpeechRecognition();
          startAudioVisualization();
          talkBtn.innerText = "Stop Talking";
          running = true;
        } else {
          recognition.stop();
          audioCtx && audioCtx.close();
          talkBtn.innerText = "Start Talking";
          running = false;
        }
      });

      printBtn.addEventListener("click", () => {
        const printWindow = window.open("", "", "width=600,height=600");
        printWindow.document.write("<pre>" + output.value + "</pre>");
        printWindow.document.close();
        printWindow.focus();
        printWindow.print();
        printWindow.close();
      });

      const slides = document.querySelectorAll(".slider-container img");
      let index = 0;

      function showSlide(i) {
        slides.forEach((slide, idx) => {
          slide.classList.toggle("active", idx === i);
        });
      }

      setInterval(() => {
        index = (index + 1) % slides.length;
        showSlide(index);
      }, 5000);
    </script>
  </body>
</html>
